<div id="${html_id}" class="topSearchWrapper ${html_class}">
  <div class="search-site-bg"></div>
  <form action="${layout.app_url}/searchresults.html" class="" id="search-form">
    <fieldset>
      <div class="searchInputWrapper">
        <input class="float-left search-site-box" type="search"
               name="body"
               title="Search this site"
               accesskey="4" size="15"
               placeholder="What to search for?"
               autocomplete = "off"
			   role = "textbox"
			   aria-autocomplete = "list"
			   aria-haspopup = "true"
               />
        <button class="searchButton ir" type="submit">Search
        </button>
      </div>
    </fieldset>
  </form>

  <script language="javascript" type="text/javascript" defer>
      jQuery(function($) {
         function _finishAnimation(el) {
            // bump all animation to the end
            while (el.queue().length) {
                el.stop(false, true);
            }
          }
          var $tabBg = $('#${html_id} .search-site-bg');
          $('#${html_id} input.search-site-box')
              .searchbox(${widget_options})
              // need to animate the little gray tab behind the search input
              .on({
                  pushdownrendererbeforeshow: function (evt) {
                      _finishAnimation($tabBg);
                      $tabBg
                        .addClass('active')
                        .css('opacity', 0);
                      $tabBg.animate({opacity: 1}, 100);
                  },
                  pushdownrendererbeforehide: function (evt) {
                      $tabBg.removeClass('active');
                  },
                  pushdownrendererprogresson: function (evt) {
                      _finishAnimation($tabBg);
                      $tabBg.animate({opacity: 0}, 100);
                  },
                  pushdownrendererprogressoff: function (evt) {
                      setTimeout(function () {
                          _finishAnimation($tabBg);
                          $tabBg.animate({opacity: 1}, 250);
                      }, 100);
                  }
              });
      });
  </script>    

</div>
